<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Predictions - SmartFarm</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary-color: #2e7d32;
            --secondary-color: #4caf50;
            --accent-color: #8bc34a;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .navbar-custom {
            background: rgba(255, 255, 255, 0.95) !important;
            backdrop-filter: blur(10px);
            box-shadow: 0 2px 20px rgba(0,0,0,0.1);
        }

        .main-container {
            margin-top: 80px;
            padding: 20px;
        }

        .dashboard-card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .ai-header {
            text-align: center;
            color: white;
            margin-bottom: 40px;
        }

        .ai-header h1 {
            font-size: 3rem;
            font-weight: 700;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .prediction-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            position: relative;
            overflow: hidden;
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .prediction-card:hover {
            transform: translateY(-5px);
        }

        .prediction-card::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 100px;
            height: 100px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            transform: translate(30px, -30px);
        }

        .prediction-icon {
            font-size: 3rem;
            margin-bottom: 15px;
        }

        .prediction-title {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .prediction-description {
            opacity: 0.9;
            margin-bottom: 20px;
        }

        .seed-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .seed-card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border-left: 4px solid #28a745;
            transition: transform 0.2s ease;
        }

        .seed-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 20px rgba(0,0,0,0.15);
        }

        .seed-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .seed-name {
            font-weight: bold;
            color: #495057;
            font-size: 1.1rem;
        }

        .seed-score {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 500;
        }

        .score-excellent {
            background: #d4edda;
            color: #155724;
        }

        .score-good {
            background: #fff3cd;
            color: #856404;
        }

        .score-fair {
            background: #f8d7da;
            color: #721c24;
        }

        .seed-details {
            margin-bottom: 15px;
        }

        .seed-details p {
            margin-bottom: 8px;
            color: #6c757d;
            font-size: 0.9rem;
        }

        .seed-actions {
            display: flex;
            gap: 10px;
        }

        .btn-seed {
            background: linear-gradient(135deg, #4caf50, #8bc34a);
            border: none;
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .btn-seed:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(76, 175, 80, 0.3);
            color: white;
        }

        .weather-widget {
            background: linear-gradient(135deg, #17a2b8, #138496);
            color: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .weather-metrics {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .weather-metric {
            text-align: center;
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
        }

        .metric-value {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .metric-label {
            font-size: 0.8rem;
            opacity: 0.9;
        }

        .chart-container {
            position: relative;
            height: 300px;
            margin: 20px 0;
        }

        .ai-insights {
            background: linear-gradient(135deg, #fd7e14, #e83e8c);
            color: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .insight-item {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 15px;
        }

        .insight-title {
            font-weight: bold;
            margin-bottom: 8px;
        }

        .insight-description {
            opacity: 0.9;
            font-size: 0.9rem;
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-light navbar-custom fixed-top">
        <div class="container">
            <a class="navbar-brand fw-bold" href="dashboard.html">
                <i class="fas fa-leaf text-success me-2"></i>SmartFarm
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="dashboard.html">
                            <i class="fas fa-home me-1"></i>Dashboard
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="ai-predictions.html">
                            <i class="fas fa-brain me-1"></i>AI Predictions
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="supply-chain.html">
                            <i class="fas fa-truck me-1"></i>Supply Chain
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="sustainability.html">
                            <i class="fas fa-globe-americas me-1"></i>Sustainability
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" onclick="logout()">
                            <i class="fas fa-sign-out-alt me-1"></i>Logout
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="main-container">
        <!-- Header -->
        <div class="ai-header">
            <h1>🤖 AI Seed Predictions</h1>
            <p>Predict optimal seeds to sow based on current weather patterns for maximum harvest potential</p>
        </div>

        <!-- Current Weather Widget -->
        <div class="weather-widget">
            <h5 class="mb-3">
                <i class="fas fa-cloud-sun me-2"></i>Current Weather Conditions
            </h5>
            <div class="weather-metrics">
                <div class="weather-metric">
                    <div class="metric-value" id="currentTemp">28°C</div>
                    <div class="metric-label">Temperature</div>
                </div>
                <div class="weather-metric">
                    <div class="metric-value" id="currentHumidity">75%</div>
                    <div class="metric-label">Humidity</div>
                </div>
                <div class="weather-metric">
                    <div class="metric-value" id="currentRainfall">85mm</div>
                    <div class="metric-label">Monthly Rainfall</div>
                </div>
                <div class="weather-metric">
                    <div class="metric-value" id="currentSeason">Summer</div>
                    <div class="metric-label">Season</div>
                </div>
            </div>
        </div>

        <!-- AI Insights -->
        <div class="ai-insights">
            <h5 class="mb-3">
                <i class="fas fa-brain me-2"></i>AI Insights & Recommendations
            </h5>
            <div class="insight-item">
                <div class="insight-title">🌡️ Temperature Analysis</div>
                <div class="insight-description">
                    Current temperature of 28°C is optimal for warm-weather crops like tomatoes, peppers, and okra. 
                    These crops will have maximum growth potential and yield.
                </div>
            </div>
            <div class="insight-item">
                <div class="insight-title">💧 Humidity & Rainfall</div>
                <div class="insight-description">
                    High humidity (75%) and moderate rainfall (85mm) create ideal conditions for moisture-loving crops. 
                    Consider crops that thrive in humid environments.
                </div>
            </div>
            <div class="insight-item">
                <div class="insight-title">📅 Seasonal Timing</div>
                <div class="insight-description">
                    Summer season provides long daylight hours and warm temperatures. Perfect for heat-loving vegetables 
                    that require consistent warmth for optimal growth.
                </div>
            </div>
        </div>

        <!-- Top Seed Recommendations -->
        <div class="dashboard-card">
            <h5 class="mb-3">
                <i class="fas fa-seedling me-2"></i>Top AI Seed Recommendations
            </h5>
            <div class="seed-grid" id="seedRecommendations">
                <!-- Seed recommendations will be populated here -->
            </div>
        </div>

        <!-- Harvest Prediction Chart -->
        <div class="dashboard-card">
            <h5 class="mb-3">
                <i class="fas fa-chart-line me-2"></i>Harvest Timeline Predictions
            </h5>
            <div class="chart-container">
                <canvas id="harvestChart"></canvas>
            </div>
        </div>

        <!-- Weather Forecast -->
        <div class="dashboard-card">
            <h5 class="mb-3">
                <i class="fas fa-calendar-alt me-2"></i>7-Day Weather Forecast
            </h5>
            <div class="chart-container">
                <canvas id="weatherChart"></canvas>
            </div>
        </div>

        <!-- Action Buttons -->
        <div class="text-center">
            <button class="btn btn-seed me-3" onclick="refreshPredictions()">
                <i class="fas fa-sync me-2"></i>Refresh Predictions
            </button>
            <button class="btn btn-seed me-3" onclick="exportRecommendations()">
                <i class="fas fa-download me-2"></i>Export Recommendations
            </button>
            <button class="btn btn-seed" onclick="schedulePlanting()">
                <i class="fas fa-calendar-plus me-2"></i>Schedule Planting
            </button>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/ai-seed-predictor.js"></script>
    <script>
        // AI Predictions Page Functions
        let harvestChart, weatherChart;

        document.addEventListener('DOMContentLoaded', function() {
            initializeCharts();
            populateSeedRecommendations();
        });

        function initializeCharts() {
            // Harvest Timeline Chart
            const harvestCtx = document.getElementById('harvestChart').getContext('2d');
            harvestChart = new Chart(harvestCtx, {
                type: 'line',
                data: {
                    labels: ['Week 1', 'Week 2', 'Week 3', 'Week 4', 'Week 5', 'Week 6', 'Week 7', 'Week 8'],
                    datasets: [
                        {
                            label: 'Tomatoes',
                            data: [0, 0, 0, 0, 20, 60, 85, 100],
                            borderColor: '#e74c3c',
                            backgroundColor: 'rgba(231, 76, 60, 0.1)',
                            tension: 0.4
                        },
                        {
                            label: 'Peppers',
                            data: [0, 0, 0, 0, 0, 15, 40, 75],
                            borderColor: '#f39c12',
                            backgroundColor: 'rgba(243, 156, 18, 0.1)',
                            tension: 0.4
                        },
                        {
                            label: 'Okra',
                            data: [0, 0, 0, 0, 0, 0, 30, 70],
                            borderColor: '#27ae60',
                            backgroundColor: 'rgba(39, 174, 96, 0.1)',
                            tension: 0.4
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Predicted Harvest Timeline (% of total yield)'
                        },
                        legend: {
                            position: 'top',
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100,
                            ticks: {
                                callback: function(value) {
                                    return value + '%';
                                }
                            }
                        }
                    }
                }
            });

            // Weather Forecast Chart
            const weatherCtx = document.getElementById('weatherChart').getContext('2d');
            weatherChart = new Chart(weatherCtx, {
                type: 'bar',
                data: {
                    labels: ['Today', 'Day 2', 'Day 3', 'Day 4', 'Day 5', 'Day 6', 'Day 7'],
                    datasets: [
                        {
                            label: 'Temperature (°C)',
                            data: [28, 30, 32, 29, 27, 26, 24],
                            backgroundColor: 'rgba(255, 99, 132, 0.6)',
                            borderColor: 'rgba(255, 99, 132, 1)',
                            borderWidth: 1
                        },
                        {
                            label: 'Humidity (%)',
                            data: [75, 80, 70, 78, 82, 85, 88],
                            backgroundColor: 'rgba(54, 162, 235, 0.6)',
                            borderColor: 'rgba(54, 162, 235, 1)',
                            borderWidth: 1
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: '7-Day Weather Forecast'
                        },
                        legend: {
                            position: 'top',
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100
                        }
                    }
                }
            });
        }

        function populateSeedRecommendations() {
            const container = document.getElementById('seedRecommendations');
            if (!container) return;

            // Sample seed recommendations
            const recommendations = [
                {
                    name: 'Tomatoes',
                    variety: 'Cherry Tomatoes',
                    score: 95,
                    harvestDate: 'March 15, 2024',
                    profitPotential: 8.50,
                    growingDays: 75,
                    description: 'Perfect for current warm, humid conditions. High yield potential.',
                    riskLevel: 'Low'
                },
                {
                    name: 'Peppers',
                    variety: 'Bell Peppers',
                    score: 92,
                    harvestDate: 'March 20, 2024',
                    profitPotential: 12.00,
                    growingDays: 80,
                    description: 'Thrives in hot, humid tropical climates.',
                    riskLevel: 'Low'
                },
                {
                    name: 'Okra',
                    variety: 'Clemson Spineless',
                    score: 88,
                    harvestDate: 'February 28, 2024',
                    profitPotential: 6.75,
                    growingDays: 60,
                    description: 'Heat-loving crop, excellent for tropical climates.',
                    riskLevel: 'Low'
                },
                {
                    name: 'Eggplant',
                    variety: 'Long Purple',
                    score: 85,
                    harvestDate: 'March 25, 2024',
                    profitPotential: 9.50,
                    growingDays: 85,
                    description: 'Perfect for warm, moist conditions.',
                    riskLevel: 'Medium'
                },
                {
                    name: 'Cucumber',
                    variety: 'Marketmore',
                    score: 82,
                    harvestDate: 'March 10, 2024',
                    profitPotential: 4.20,
                    growingDays: 60,
                    description: 'High-yield crop for warm, moist conditions.',
                    riskLevel: 'Medium'
                },
                {
                    name: 'Beans',
                    variety: 'Green Bush',
                    score: 78,
                    harvestDate: 'February 25, 2024',
                    profitPotential: 5.80,
                    growingDays: 55,
                    description: 'Versatile crop for moderate climates.',
                    riskLevel: 'Medium'
                }
            ];

            container.innerHTML = '';
            recommendations.forEach(seed => {
                const seedCard = document.createElement('div');
                seedCard.className = 'seed-card';
                seedCard.innerHTML = `
                    <div class="seed-header">
                        <div class="seed-name">${seed.name} - ${seed.variety}</div>
                        <div class="seed-score score-${seed.score >= 90 ? 'excellent' : seed.score >= 80 ? 'good' : 'fair'}">
                            ${seed.score}% Match
                        </div>
                    </div>
                    <div class="seed-details">
                        <p><i class="fas fa-calendar-alt me-2"></i><strong>Harvest Date:</strong> ${seed.harvestDate}</p>
                        <p><i class="fas fa-dollar-sign me-2"></i><strong>Profit Potential:</strong> $${seed.profitPotential}/kg</p>
                        <p><i class="fas fa-clock me-2"></i><strong>Growing Days:</strong> ${seed.growingDays} days</p>
                        <p><i class="fas fa-exclamation-triangle me-2"></i><strong>Risk Level:</strong> ${seed.riskLevel}</p>
                        <p><i class="fas fa-info-circle me-2"></i>${seed.description}</p>
                    </div>
                    <div class="seed-actions">
                        <button class="btn btn-seed btn-sm" onclick="selectSeed('${seed.name}', '${seed.variety}')">
                            <i class="fas fa-seedling me-1"></i>Select
                        </button>
                        <button class="btn btn-outline-primary btn-sm" onclick="viewSeedDetails('${seed.name}')">
                            <i class="fas fa-info-circle me-1"></i>Details
                        </button>
                    </div>
                `;
                container.appendChild(seedCard);
            });
        }

        function selectSeed(seedName, variety) {
            alert(`🌱 Selected: ${seedName} - ${variety}\n\nThis seed has been added to your planting schedule!\n\nNext steps:\n1. Prepare soil according to planting guide\n2. Schedule planting date\n3. Set up irrigation system\n4. Monitor growth progress\n\nCheck the Crop Management section for detailed tracking.`);
        }

        function viewSeedDetails(seedName) {
            alert(`📖 Seed Details for ${seedName}\n\nDetailed information about optimal growing conditions, planting instructions, and care requirements will be displayed here.\n\nThis would integrate with the detailed seed database for comprehensive information.`);
        }

        function refreshPredictions() {
            alert('🔄 Refreshing AI Predictions...\n\nNew predictions generated based on:\n• Updated weather data\n• Market conditions\n• Seasonal factors\n• Historical yield data\n\nRecommendations have been updated!');
            populateSeedRecommendations();
        }

        function exportRecommendations() {
            alert('📄 Exporting AI Recommendations...\n\nYour seed recommendations have been exported as:\n• PDF report with detailed analysis\n• CSV file for spreadsheet import\n• Planting schedule calendar\n\nFiles are ready for download!');
        }

        function schedulePlanting() {
            alert('📅 Schedule Planting\n\nPlanting schedule options:\n\n1. Immediate Planting (Recommended)\n   • Best for current weather conditions\n   • Optimal timing for maximum yield\n\n2. Weekly Schedule\n   • Staggered planting for continuous harvest\n   • Risk mitigation strategy\n\n3. Custom Schedule\n   • Plan based on your availability\n   • Weather-dependent adjustments\n\nWould you like to proceed with immediate planting?');
        }

        function logout() {
            if (confirm('Are you sure you want to logout?')) {
                localStorage.removeItem('smartfarm_user');
                localStorage.removeItem('smartfarm_token');
                sessionStorage.removeItem('smartfarm_user');
                sessionStorage.removeItem('smartfarm_token');
                window.location.href = 'login.html';
            }
        }
    </script>
</body>
</html>
