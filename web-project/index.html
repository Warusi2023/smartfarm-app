<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>SmartFarm</title>
  </head>
  <body>
    <div id="app"></div>
    <script type="module">
      import API_URL from "./src/env.ts";
      const el = document.getElementById("app");
      el.innerHTML = "<h1>SmartFarm Web</h1><p>API: " + API_URL + "</p>";
      fetch(API_URL + "/health")
        .then(r => r.json())
        .then(j => el.insertAdjacentHTML("beforeend", "<pre>"+JSON.stringify(j,null,2)+"</pre>"))
        .catch(e => { console.error(e); el.insertAdjacentHTML("beforeend","<p style='color:red'>API call failed</p>"); });
    </script>
  </body>
</html>