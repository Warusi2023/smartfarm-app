<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Navigation Test - SmartFarm</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        .nav-test-card {
            margin-bottom: 1rem;
        }
        .test-result {
            margin-top: 0.5rem;
            padding: 0.5rem;
            border-radius: 4px;
        }
        .test-success {
            background-color: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
        }
        .test-error {
            background-color: #f8d7da;
            border: 1px solid #f5c6cb;
            color: #721c24;
        }
        .test-warning {
            background-color: #fff3cd;
            border: 1px solid #ffeaa7;
            color: #856404;
        }
    </style>
</head>
<body>
    <div class="container mt-4">
        <h1><i class="fas fa-route me-2"></i>SmartFarm Navigation Test</h1>
        <p class="text-muted">Test all navigation functions and view elements</p>
        
        <div class="row">
            <div class="col-md-8">
                <div class="card">
                    <div class="card-header">
                        <h5><i class="fas fa-list me-2"></i>Navigation Tests</h5>
                    </div>
                    <div class="card-body">
                        <div id="navigation-tests"></div>
                        <hr>
                        <button class="btn btn-primary" onclick="runNavigationTests()">
                            <i class="fas fa-play me-1"></i>Run All Tests
                        </button>
                        <button class="btn btn-success" onclick="testNavigationFunctions()">
                            <i class="fas fa-code me-1"></i>Test Functions Only
                        </button>
                        <button class="btn btn-info" onclick="testViewElements()">
                            <i class="fas fa-eye me-1"></i>Test View Elements Only
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="col-md-4">
                <div class="card">
                    <div class="card-header">
                        <h5><i class="fas fa-info-circle me-2"></i>Test Summary</h5>
                    </div>
                    <div class="card-body">
                        <div class="row text-center">
                            <div class="col-4">
                                <h3 id="total-tests" class="text-primary">0</h3>
                                <small>Total</small>
                            </div>
                            <div class="col-4">
                                <h3 id="passed-tests" class="text-success">0</h3>
                                <small>Passed</small>
                            </div>
                            <div class="col-4">
                                <h3 id="failed-tests" class="text-danger">0</h3>
                                <small>Failed</small>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="card mt-3">
                    <div class="card-header">
                        <h5><i class="fas fa-bug me-2"></i>Debug Info</h5>
                    </div>
                    <div class="card-body">
                        <small>
                            <strong>Current URL:</strong><br>
                            <code id="current-url"></code>
                        </small>
                        <hr>
                        <small>
                            <strong>Console:</strong><br>
                            <span class="text-muted">Check browser console for detailed logs</span>
                        </small>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="row mt-4">
            <div class="col-12">
                <div class="card">
                    <div class="card-header">
                        <h5><i class="fas fa-external-link-alt me-2"></i>Quick Navigation Tests</h5>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6">
                                <h6>Dashboard Navigation</h6>
                                <div class="btn-group-vertical w-100" role="group">
                                    <button class="btn btn-outline-primary btn-sm" onclick="testSpecificNavigation('showDashboard', 'dashboardView')">
                                        <i class="fas fa-tachometer-alt me-1"></i>Dashboard
                                    </button>
                                    <button class="btn btn-outline-primary btn-sm" onclick="testSpecificNavigation('showFarmManagement', 'farmManagementView')">
                                        <i class="fas fa-tractor me-1"></i>Farm Management
                                    </button>
                                    <button class="btn btn-outline-primary btn-sm" onclick="testSpecificNavigation('showCropManagement', 'cropManagementView')">
                                        <i class="fas fa-seedling me-1"></i>Crop Management
                                    </button>
                                    <button class="btn btn-outline-primary btn-sm" onclick="testSpecificNavigation('showLivestockManagement', 'livestockManagementView')">
                                        <i class="fas fa-cow me-1"></i>Livestock Management
                                    </button>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <h6>Management & Reports</h6>
                                <div class="btn-group-vertical w-100" role="group">
                                    <button class="btn btn-outline-success btn-sm" onclick="testSpecificNavigation('showPetsManagement', 'petsManagementView')">
                                        <i class="fas fa-paw me-1"></i>Pets Management
                                    </button>
                                    <button class="btn btn-outline-success btn-sm" onclick="testSpecificNavigation('showInventoryManagement', 'inventoryManagementView')">
                                        <i class="fas fa-boxes me-1"></i>Inventory Management
                                    </button>
                                    <button class="btn btn-outline-info btn-sm" onclick="testSpecificNavigation('showAnalytics', 'analyticsView')">
                                        <i class="fas fa-chart-line me-1"></i>Analytics
                                    </button>
                                    <button class="btn btn-outline-warning btn-sm" onclick="testSpecificNavigation('showTasks', 'tasksView')">
                                        <i class="fas fa-tasks me-1"></i>Tasks
                                    </button>
                                    <button class="btn btn-outline-warning btn-sm" onclick="testSpecificNavigation('showReports', 'reportsView')">
                                        <i class="fas fa-file-alt me-1"></i>Reports
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Display current URL
        document.getElementById('current-url').textContent = window.location.href;

        const navigationTests = [
            { name: 'Dashboard', func: 'showDashboard', view: 'dashboardView', icon: 'fas fa-tachometer-alt' },
            { name: 'Farm Management', func: 'showFarmManagement', view: 'farmManagementView', icon: 'fas fa-tractor' },
            { name: 'Crop Management', func: 'showCropManagement', view: 'cropManagementView', icon: 'fas fa-seedling' },
            { name: 'Livestock Management', func: 'showLivestockManagement', view: 'livestockManagementView', icon: 'fas fa-cow' },
            { name: 'Pets Management', func: 'showPetsManagement', view: 'petsManagementView', icon: 'fas fa-paw' },
            { name: 'Inventory Management', func: 'showInventoryManagement', view: 'inventoryManagementView', icon: 'fas fa-boxes' },
            { name: 'Analytics', func: 'showAnalytics', view: 'analyticsView', icon: 'fas fa-chart-line' },
            { name: 'Tasks', func: 'showTasks', view: 'tasksView', icon: 'fas fa-tasks' },
            { name: 'Reports', func: 'showReports', view: 'reportsView', icon: 'fas fa-file-alt' }
        ];

        let testResults = {
            total: 0,
            passed: 0,
            failed: 0
        };

        function updateTestSummary() {
            document.getElementById('total-tests').textContent = testResults.total;
            document.getElementById('passed-tests').textContent = testResults.passed;
            document.getElementById('failed-tests').textContent = testResults.failed;
        }

        function runNavigationTests() {
            const container = document.getElementById('navigation-tests');
            container.innerHTML = '<div class="spinner-border spinner-border-sm me-2"></div>Running navigation tests...';
            
            testResults = { total: 0, passed: 0, failed: 0 };
            let html = '';
            
            navigationTests.forEach(test => {
                testResults.total++;
                const result = testNavigationItem(test);
                
                if (result.success) {
                    testResults.passed++;
                    html += `
                        <div class="nav-test-card card">
                            <div class="card-body">
                                <h6><i class="${test.icon} me-2"></i>${test.name}</h6>
                                <div class="test-result test-success">
                                    <i class="fas fa-check-circle me-1"></i>
                                    <strong>✅ PASSED</strong><br>
                                    <small>Function: ${test.func} | View: ${test.view}</small>
                                </div>
                            </div>
                        </div>
                    `;
                } else {
                    testResults.failed++;
                    html += `
                        <div class="nav-test-card card">
                            <div class="card-body">
                                <h6><i class="${test.icon} me-2"></i>${test.name}</h6>
                                <div class="test-result test-error">
                                    <i class="fas fa-times-circle me-1"></i>
                                    <strong>❌ FAILED</strong><br>
                                    <small>${result.error}</small>
                                </div>
                            </div>
                        </div>
                    `;
                }
            });
            
            container.innerHTML = html;
            updateTestSummary();
            
            console.log(`Navigation Tests Complete: ${testResults.passed}/${testResults.total} passed`);
        }

        function testNavigationFunctions() {
            const container = document.getElementById('navigation-tests');
            container.innerHTML = '<div class="spinner-border spinner-border-sm me-2"></div>Testing navigation functions...';
            
            testResults = { total: 0, passed: 0, failed: 0 };
            let html = '';
            
            navigationTests.forEach(test => {
                testResults.total++;
                const funcExists = typeof window[test.func] === 'function';
                
                if (funcExists) {
                    testResults.passed++;
                    html += `
                        <div class="nav-test-card card">
                            <div class="card-body">
                                <h6><i class="${test.icon} me-2"></i>${test.name}</h6>
                                <div class="test-result test-success">
                                    <i class="fas fa-check-circle me-1"></i>
                                    <strong>✅ Function Exists</strong><br>
                                    <small>${test.func}() is defined</small>
                                </div>
                            </div>
                        </div>
                    `;
                } else {
                    testResults.failed++;
                    html += `
                        <div class="nav-test-card card">
                            <div class="card-body">
                                <h6><i class="${test.icon} me-2"></i>${test.name}</h6>
                                <div class="test-result test-error">
                                    <i class="fas fa-times-circle me-1"></i>
                                    <strong>❌ Function Missing</strong><br>
                                    <small>${test.func}() is not defined</small>
                                </div>
                            </div>
                        </div>
                    `;
                }
            });
            
            container.innerHTML = html;
            updateTestSummary();
        }

        function testViewElements() {
            const container = document.getElementById('navigation-tests');
            container.innerHTML = '<div class="spinner-border spinner-border-sm me-2"></div>Testing view elements...';
            
            testResults = { total: 0, passed: 0, failed: 0 };
            let html = '';
            
            navigationTests.forEach(test => {
                testResults.total++;
                const viewElement = document.getElementById(test.view);
                
                if (viewElement) {
                    testResults.passed++;
                    html += `
                        <div class="nav-test-card card">
                            <div class="card-body">
                                <h6><i class="${test.icon} me-2"></i>${test.name}</h6>
                                <div class="test-result test-success">
                                    <i class="fas fa-check-circle me-1"></i>
                                    <strong>✅ View Element Exists</strong><br>
                                    <small>Element '${test.view}' found</small>
                                </div>
                            </div>
                        </div>
                    `;
                } else {
                    testResults.failed++;
                    html += `
                        <div class="nav-test-card card">
                            <div class="card-body">
                                <h6><i class="${test.icon} me-2"></i>${test.name}</h6>
                                <div class="test-result test-error">
                                    <i class="fas fa-times-circle me-1"></i>
                                    <strong>❌ View Element Missing</strong><br>
                                    <small>Element '${test.view}' not found</small>
                                </div>
                            </div>
                        </div>
                    `;
                }
            });
            
            container.innerHTML = html;
            updateTestSummary();
        }

        function testNavigationItem(test) {
            try {
                // Check if function exists
                if (typeof window[test.func] !== 'function') {
                    return { success: false, error: `Function '${test.func}' is not defined` };
                }
                
                // Check if view element exists
                const viewElement = document.getElementById(test.view);
                if (!viewElement) {
                    return { success: false, error: `View element '${test.view}' not found` };
                }
                
                // Try to call the function (in a safe way)
                try {
                    window[test.func]();
                    return { success: true, error: null };
                } catch (funcError) {
                    return { success: false, error: `Function call failed: ${funcError.message}` };
                }
            } catch (error) {
                return { success: false, error: `Test failed: ${error.message}` };
            }
        }

        function testSpecificNavigation(funcName, viewId) {
            console.log(`Testing ${funcName} -> ${viewId}`);
            
            try {
                // Check if function exists
                if (typeof window[funcName] !== 'function') {
                    alert(`❌ Function '${funcName}' is not defined`);
                    return;
                }
                
                // Check if view exists
                const viewElement = document.getElementById(viewId);
                if (!viewElement) {
                    alert(`❌ View element '${viewId}' not found`);
                    return;
                }
                
                // Try to call the function
                window[funcName]();
                alert(`✅ ${funcName} executed successfully!`);
                
            } catch (error) {
                alert(`❌ Error testing ${funcName}: ${error.message}`);
            }
        }

        // Auto-run tests on page load
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(() => {
                runNavigationTests();
            }, 1000);
        });
    </script>
</body>
</html>
